{% extends "base.html" %}
{% block title %}Tasks List | {{ block.super|default:"Task Tracker" }}{% endblock %}
{% block main %}
<div class="card shadow">
  <div class="card-header d-flex flex-row justify-content-center">
    <h1 class="card-title h3 text-capitalize mx-auto my-2"><i class="bi bi-list-task"></i>&nbsp;task list</h1>
  </div>
  <div class="card-body">
    <table class="table">
      <caption class="visually-hidden">task list</caption>
      <thead>
      <tr>
        <th class="col col-3" scope="col">Assignee</th>
        <th class="col col-8" scope="col">Task Summary</th>
        <th class="col d-flex flex-row justify-content-center" scope="col">Actions</th>
      </tr>
      </thead>
      <tbody id="taskContainer">
      {% for object in object_list %}
        <tr class="task" id="{{ object.pk }}"
            data-task-completed="{% if object.completed %}true{% else %}false{% endif %}">
          <td class="align-middle" aria-label="TaskAssignee">
            <img src="{{ object.assignee.image }}" alt="avatar" class="rounded-circle shadow avatar">
            <br>
            <span class="d-none d-md-inline ms-2 text-nowrap">
                    {{ object.assignee.first_name }} {{ object.assignee.last_name }}
                  </span>
          </td>
          <td class="align-middle" aria-label="TaskDetails">
            <div>
              <a href="{% url "tasks:detail" object.pk %}" class="text-decoration-none fw-bold task-detail-ref">
                {{ object.summary }}
              </a>
            </div>
            <p class="d-none d-lg-block fst-italic text-muted">
              {{ object.description|truncatewords:20 }}
            </p>
          </td>
          <td class="align-middle" aria-label="TaskActions">
            <div class="d-flex flex-row justify-content-between align-items-center">
              {% if object.completed %}
                <i class="bi bi-arrow-repeat" role="button"
                    {# hx-patch="" hx-vals="js:{completed:false}" hx-swap="none"#}
                   data-task-target="{{ pk }}" data-task-action="patch"></i>
              {% else %}
                <i class="bi bi-check-lg" role="button"
                    {# hx-patch="" hx-vals="js:{completed:true}" hx-swap="none"#}
                   data-task-target="{{ pk }}" data-task-action="patch"></i>
              {% endif %}
              <i class="bi bi-trash" role="button"
                  {# hx-delete="" hx-target="closest tr" hx-swap="outerHTML"#}
                 data-task-target="{{ pk }}" data-task-action="delete"></i>
            </div>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="card-footer d-flex flex-row justify-content-center">
    <nav aria-label="TaskPagination">
      <ul class="pagination">
        <li class="page-item disabled"><a href="" class="page-link"><i class="bi bi-chevron-left"></i></a></li>
        <li class="page-item active"><a href="" class="page-link">1</a></li>
        <li class="page-item"><a href="" class="page-link">2</a></li>
        <li class="page-item"><a href="" class="page-link">3</a></li>
        <li class="page-item"><a href="" class="page-link">4</a></li>
        <li class="page-item"><a href="" class="page-link">5</a></li>
        <li class="page-item"><a href="" class="page-link"><i class="bi bi-chevron-right"></i></a></li>
      </ul>
    </nav>
  </div>
</div>
{% endblock %}
